<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nuestra Historia</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-1: #090912;
      --bg-2: #141033;
      --bg-3: #1b1447;
      --card-bg: rgba(255, 255, 255, 0.08);
      --card-border: rgba(255, 255, 255, 0.2);
      --text-main: #f5f4ff;
      --text-soft: #c7c6df;
      --accent: #9fa8ff;
      --accent-2: #86e3ff;
      --shadow: 0 14px 40px rgba(0, 0, 0, 0.35);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      min-height: 100vh;
      color: var(--text-main);
      background:
        radial-gradient(circle at 20% 10%, rgba(134, 227, 255, 0.12), transparent 34%),
        radial-gradient(circle at 80% 20%, rgba(159, 168, 255, 0.16), transparent 40%),
        linear-gradient(155deg, var(--bg-1), var(--bg-2) 45%, var(--bg-3));
      overflow-x: hidden;
    }

    .story-section {
      width: min(1150px, 92%);
      margin: 0 auto;
      padding: 88px 0 90px;
      position: relative;
    }

    .title {
      text-align: center;
      font-family: 'Playfair Display', Georgia, serif;
      font-weight: 700;
      letter-spacing: 0.4px;
      font-size: clamp(2.3rem, 5vw, 3.8rem);
      line-height: 1.1;
      text-shadow: 0 6px 24px rgba(79, 87, 175, 0.4);
      margin-bottom: 16px;
    }

    .subtitle {
      text-align: center;
      color: var(--text-soft);
      font-size: clamp(1rem, 2.3vw, 1.24rem);
      font-weight: 300;
      max-width: 760px;
      margin: 0 auto 74px;
    }

    .timeline-wrap {
      position: relative;
    }

    .timeline-photos {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 0;
    }

    .timeline-photo {
      position: absolute;
      width: clamp(110px, 12vw, 170px);
      aspect-ratio: 3 / 4;
      border-radius: 16px;
      object-fit: cover;
      border: 1px solid rgba(255, 255, 255, 0.35);
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 12px 34px rgba(0, 0, 0, 0.35), 0 0 18px rgba(134, 227, 255, 0.2);
      opacity: 0;
      transform: translateY(22px) rotate(var(--tilt, 0deg)) scale(0.98);
      transition: opacity 0.8s ease, transform 0.8s ease, box-shadow 0.35s ease;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      filter: saturate(1.02);
      pointer-events: auto;
    }

    .timeline-photo.visible {
      opacity: 0.72;
      transform: translateY(0) rotate(var(--tilt, 0deg)) scale(1);
    }

    .timeline-photo:hover {
      opacity: 0.9;
      box-shadow: 0 16px 38px rgba(0, 0, 0, 0.4), 0 0 22px rgba(159, 168, 255, 0.25);
    }

    .timeline-photo.side-left {
      left: clamp(-160px, -12vw, -120px);
    }

    .timeline-photo.side-right {
      right: clamp(-160px, -12vw, -120px);
    }

    .timeline {
      position: relative;
      padding: 6px 0 18px;
      z-index: 2;
    }

    .timeline::before {
      content: "";
      position: absolute;
      left: 50%;
      top: 0;
      transform: translateX(-50%);
      width: 4px;
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(to bottom, rgba(157, 170, 255, 0.35), rgba(134, 227, 255, 0.58), rgba(157, 170, 255, 0.35));
      box-shadow: 0 0 20px rgba(134, 227, 255, 0.5);
    }

    .timeline::after {
      content: "";
      position: absolute;
      left: 50%;
      top: -40px;
      transform: translateX(-50%);
      width: 10px;
      height: 90px;
      border-radius: 999px;
      background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(220, 230, 255, 0.95), rgba(255, 255, 255, 0));
      filter: blur(1px);
      animation: shine 3.9s ease-in-out infinite;
      z-index: 1;
      opacity: 0.9;
    }

    @keyframes shine {
      0% {
        top: -50px;
        opacity: 0;
      }
      20% {
        opacity: 0.9;
      }
      80% {
        opacity: 0.8;
      }
      100% {
        top: calc(100% - 40px);
        opacity: 0;
      }
    }

    .timeline-item {
      position: relative;
      width: 50%;
      padding: 18px 44px;
      margin-bottom: 26px;
      opacity: 0;
      transform: translateY(28px);
      transition: opacity 0.7s ease, transform 0.7s ease;
    }

    .timeline-item.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .timeline-item.left {
      left: 0;
      text-align: right;
    }

    .timeline-item.right {
      left: 50%;
      text-align: left;
    }

    .point {
      position: absolute;
      top: 34px;
      width: 54px;
      height: 54px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      font-size: 1.35rem;
      background: rgba(255, 255, 255, 0.11);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 0 20px rgba(148, 195, 255, 0.25), inset 0 0 18px rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 2;
      transition: transform 0.35s ease, box-shadow 0.35s ease;
    }

    .timeline-item.left .point {
      right: -27px;
    }

    .timeline-item.right .point {
      left: -27px;
    }

    .card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 18px;
      padding: 22px 24px;
      backdrop-filter: blur(11px);
      -webkit-backdrop-filter: blur(11px);
      box-shadow: var(--shadow);
      transition: transform 0.35s ease, box-shadow 0.35s ease, border-color 0.35s ease;
      position: relative;
      overflow: hidden;
      isolation: isolate;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -120% 35% auto -35%;
      height: 240%;
      background: linear-gradient(130deg, rgba(255, 255, 255, 0.16), rgba(255, 255, 255, 0));
      transform: rotate(8deg);
      pointer-events: none;
      z-index: -1;
    }

    .timeline-item:hover .card {
      transform: translateY(-7px);
      border-color: rgba(190, 217, 255, 0.55);
      box-shadow: 0 18px 38px rgba(10, 10, 26, 0.45), 0 0 20px rgba(134, 227, 255, 0.15);
    }

    .timeline-item:hover .point {
      transform: scale(1.07);
      box-shadow: 0 0 24px rgba(134, 227, 255, 0.4), inset 0 0 24px rgba(255, 255, 255, 0.14);
    }

    .card h3 {
      font-family: 'Playfair Display', Georgia, serif;
      font-size: clamp(1.18rem, 2.2vw, 1.42rem);
      margin-bottom: 10px;
      color: #ffffff;
      font-weight: 600;
      letter-spacing: 0.2px;
    }

    .card p {
      font-size: clamp(0.95rem, 2vw, 1.02rem);
      font-weight: 300;
      line-height: 1.68;
      color: var(--text-soft);
    }

    .final-quote {
      text-align: center;
      margin-top: 74px;
      font-family: 'Playfair Display', Georgia, serif;
      font-size: clamp(1.45rem, 3.7vw, 2.5rem);
      font-weight: 700;
      line-height: 1.3;
      color: #f5f3ff;
      text-wrap: balance;
      text-shadow: 0 8px 30px rgba(134, 227, 255, 0.25);
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.8s ease, transform 0.8s ease;
      transition-delay: 0.2s;
    }

    .final-quote.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .closing-message {
      max-width: 900px;
      margin: 26px auto 0;
      text-align: center;
      color: var(--text-soft);
      font-size: clamp(1rem, 2.3vw, 1.15rem);
      font-weight: 300;
      line-height: 1.85;
      opacity: 0;
      transform: translateY(24px);
      transition: opacity 0.8s ease, transform 0.8s ease;
      transition-delay: 0.35s;
      text-wrap: pretty;
    }

    .closing-message.visible {
      opacity: 1;
      transform: translateY(0);
    }

    @media (max-width: 900px) {
      .timeline-photo {
        width: clamp(75px, 18vw, 95px);
        opacity: 0.65;
      }

      .timeline-photo.visible {
        opacity: 0.55;
      }

      .timeline-photo.side-left {
        left: -40px;
      }

      .timeline-photo.side-right {
        right: -40px;
      }

      .timeline::before,
      .timeline::after {
        left: 22px;
        transform: none;
      }

      .timeline-item,
      .timeline-item.left,
      .timeline-item.right {
        width: 100%;
        left: 0;
        text-align: left;
        padding: 14px 0 14px 64px;
      }

      .timeline-item.left .point,
      .timeline-item.right .point {
        left: -5px;
        right: auto;
        top: 26px;
      }

      .subtitle {
        margin-bottom: 58px;
      }

      .final-quote {
        margin-top: 62px;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        animation: none !important;
        transition: none !important;
      }

      .timeline-item,
      .final-quote {
        opacity: 1 !important;
        transform: none !important;
      }
    }
  </style>
</head>
<body>
  <section class="story-section" aria-label="Nuestra Historia">
    <h1 class="title">Nuestra Historia</h1>
    <p class="subtitle">Cada momento contigo ha construido nuestro universo.</p>

    <div class="timeline-wrap">
      <div class="timeline-photos" id="timelinePhotos" aria-hidden="true"></div>
      <div class="timeline">
        <article class="timeline-item left reveal">
          <div class="point" aria-hidden="true">游늸</div>
          <div class="card">
            <h3>Donde nos conocimos</h3>
            <p>Desde el primer momento en Valle de Bravo, supe que hab칤a algo diferente en ti.</p>
          </div>
        </article>

        <article class="timeline-item right reveal">
          <div class="point" aria-hidden="true">游눫</div>
          <div class="card">
            <h3>Nuestra primera conversaci칩n</h3>
            <p>Una charla simple que termin칩 cambiando mi mundo.</p>
          </div>
        </article>

        <article class="timeline-item left reveal">
          <div class="point" aria-hidden="true">仇벒잺</div>
          <div class="card">
            <h3>El d칤a que supe que estaba enamorado</h3>
            <p>No fue un instante exacto, fue darme cuenta de que ya no imaginaba mi vida sin ti.</p>
          </div>
        </article>

        <article class="timeline-item right reveal">
          <div class="point" aria-hidden="true">游깿</div>
          <div class="card">
            <h3>Los momentos dif칤ciles que superamos</h3>
            <p>La distancia nos puso a prueba, pero tambi칠n nos hizo m치s fuertes.</p>
          </div>
        </article>

        <article class="timeline-item left reveal">
          <div class="point" aria-hidden="true">九걾잺</div>
          <div class="card">
            <h3>Nuestro futuro juntos</h3>
            <p>No importa cu치ntos kil칩metros nos separen hoy, s칠 que nuestro destino es el mismo.</p>
          </div>
        </article>
      </div>
    </div>

    <p class="final-quote reveal">Y esto apenas es el comienzo de nuestra eternidad.</p>
    <p class="closing-message reveal">A pesar de los momentos dif칤ciles, las peleas y los berrinches, cada d칤a me enamoro m치s de tu sonrisa. Ya no puedo imaginar mi vida sin ti; dar칤a la vida por ti, y no es exageraci칩n, es algo que siento en lo m치s profundo de mi alma. Te amo con todo lo que soy, y deseo con el coraz칩n que esta historia se siga escribiendo cada d칤a, te amo demasiado mi amor.</p>
  </section>

  <audio id="bgMusic" autoplay loop preload="auto" hidden>
    <source src="Gazzelle - Sopra.mp3" type="audio/mpeg">
  </audio>

  <script>
    const imagePool = [
      'WhatsApp Image 2026-01-27 at 3.07.44 PM.jpeg',
      'WhatsApp Image 2026-02-23 at 8.16.08 PM (1).jpeg',
      'WhatsApp Image 2026-02-23 at 8.16.08 PM (2).jpeg',
      'WhatsApp Image 2026-02-23 at 8.16.08 PM (3).jpeg',
      'WhatsApp Image 2026-02-23 at 8.16.08 PM.jpeg',
      'WhatsApp Image 2026-02-23 at 8.16.09 PM (1).jpeg',
      'WhatsApp Image 2026-02-23 at 8.16.09 PM.jpeg'
    ];

    const timelinePhotos = document.getElementById('timelinePhotos');
    const timeline = document.querySelector('.timeline');
    const bgMusic = document.getElementById('bgMusic');

    function shuffle(array) {
      const copy = [...array];
      for (let i = copy.length - 1; i > 0; i -= 1) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy;
    }

    function buildTimelinePhotos() {
      if (!timelinePhotos || !timeline) {
        return;
      }

      timelinePhotos.innerHTML = '';
      const selected = shuffle(imagePool);
      const isMobile = window.innerWidth <= 900;
      const imageCount = Math.min(selected.length, isMobile ? 4 : 6);

      for (let i = 0; i < imageCount; i += 1) {
        const img = document.createElement('img');
        img.className = `timeline-photo reveal ${i % 2 === 0 ? 'side-left' : 'side-right'}`;
        img.src = encodeURI(selected[i]);
        img.alt = 'Recuerdo especial';

        const topPercent = 8 + (i * (80 / Math.max(1, imageCount - 1))) + (Math.random() * 8 - 4);
        const rotation = isMobile ? Math.random() * 4 - 2 : Math.random() * 8 - 4;
        img.style.top = `${Math.max(3, Math.min(89, topPercent))}%`;
        img.style.setProperty('--tilt', `${rotation}deg`);
        img.style.transitionDelay = `${0.06 * i}s`;

        timelinePhotos.appendChild(img);
      }
    }

    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.18,
      rootMargin: '0px 0px -60px 0px'
    });

    function observeReveals() {
      document.querySelectorAll('.reveal').forEach((element) => observer.observe(element));
    }

    function tryPlayMusic() {
      if (!bgMusic) return;
      bgMusic.play().catch(() => {
        const resumePlayback = () => {
          bgMusic.play().catch(() => {});
          document.removeEventListener('click', resumePlayback);
          document.removeEventListener('touchstart', resumePlayback);
          document.removeEventListener('keydown', resumePlayback);
        };

        document.addEventListener('click', resumePlayback, { once: true });
        document.addEventListener('touchstart', resumePlayback, { once: true });
        document.addEventListener('keydown', resumePlayback, { once: true });
      });
    }

    buildTimelinePhotos();
    observeReveals();
    tryPlayMusic();

    window.addEventListener('resize', () => {
      clearTimeout(window.__timelinePhotoResizeTimer);
      window.__timelinePhotoResizeTimer = setTimeout(() => {
        buildTimelinePhotos();
        observeReveals();
      }, 150);
    });
  </script>
</body>
</html>
